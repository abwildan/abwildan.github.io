<!DOCTYPE html>
<html lang="en-us" dir="ltr">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <meta http-equiv="content-language" content="en-us" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />

  
  
  <title>Building VPN Server using OpenVPN &middot; Wildan&#39;s Workspace</title>
  <meta name="title" content="Building VPN Server using OpenVPN &middot; Wildan&#39;s Workspace" />
  

  
  
  <meta name="description" content="A step by step vpn server installation using openvpn~" />
  
  <meta name="keywords" content="vpn, server, openvpn, " />
  <link rel="canonical" href="http://localhost:1313/tech/openvpn-server/" />

  

  
    
        <link rel="stylesheet" href="/css/theme.css">
    
  
    
        <link rel="stylesheet" href="/css/main.css">
    
  
    
  


  


  



  
    
        <script src="/js/theme.js"></script>
      
    
  

  
    
        <script src="/js/codecopy.js"></script>
      
    
  



  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  

  <meta property="og:url" content="http://localhost:1313/tech/openvpn-server/">
  <meta property="og:site_name" content="Wildan&#39;s Workspace">
  <meta property="og:title" content="Building VPN Server using OpenVPN">
  <meta property="og:description" content="A step by step vpn server installation using openvpn~">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="tech">
    <meta property="article:published_time" content="2024-09-20T10:37:37+07:00">
    <meta property="article:modified_time" content="2024-09-20T10:37:37+07:00">
    <meta property="article:tag" content="Vpn">
    <meta property="article:tag" content="Server">
    <meta property="article:tag" content="Openvpn">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Building VPN Server using OpenVPN">
  <meta name="twitter:description" content="A step by step vpn server installation using openvpn~">


  
  






  
  


  
  
  
  
  

  
  
  
    <link rel="preload" href="http://localhost:1313/fonts/Ubuntu-Regular.woff2" as="font" type="font/woff2" crossorigin>
  

  

</head>

  <body>
    <script>
      const siteTheme = "auto";
      let savedTheme = localStorage.getItem('theme') || siteTheme;
      if (savedTheme == 'auto') {
        if ( window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ) {
          savedTheme = 'dark';
        }
      }
      if (savedTheme === "dark") {
        document.body.classList.add('dark');
        localStorage.setItem('theme', 'dark');
      }
    </script>
    <div class="content">
      <header>
    
    <a class="title" href="/">
      <img alt="Site Logo" src="/tsukasa.png" />
    </a>
    
    <div class="header-cntr">
    <a class="title" href="/">
    <span>Wildan's Workspace</span>
    </a>
  <div class="menu">
  <nav id="main-menu" class="mm-normal">
    <ul>
    <li> <button id="mob-x-icon" class="menu-btn" arial-label="x-icon"> 

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>


 </button> </li>
    
      <li><a href="/tech/" aria-label="tech">
      Tech</li></a>
    
      <li><a href="/chess/" aria-label="chess">
      Chess</li></a>
    
    </ul>
  </nav>
    <div class="side-menu">
    
    <button id="theme-switcher" class="menu-btn" aria-label="Theme switcher">
      <div id="moon">
      

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>



      </div>
      <div id="sun">
      

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>



      </div>
    </button>
    
    </div>
    <button id="mob-hb-icon" class="menu-btn" aria-label="Hamburger icon">
      

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>



    </button>
  </div>
  <script>
  (function() {
    document.addEventListener('DOMContentLoaded', function() {
    const openBtn = document.getElementById('mob-hb-icon');
    const closeBtn = document.getElementById('mob-x-icon');
    const mainMenu = document.getElementById('main-menu');
    const body = document.body;

    openBtn.addEventListener('click', function() {
        mainMenu.classList.replace('mm-normal', 'mm-mobile-open');
        closeBtn.style.display = 'block';
        body.style.overflow = 'hidden';
    });
    closeBtn.addEventListener('click', function() {
        mainMenu.classList.replace('mm-mobile-open', 'mm-normal');
        closeBtn.style.display = 'none';
        body.style.overflow = '';
    });
    })
  })();
  </script>
  
  <script>
  (function() {
    var mainmenu = document.getElementById('main-menu');
    if (!mainmenu) return;

    var path = window.location.pathname;
    var links = mainmenu.querySelectorAll('a');

    links.forEach(function(link) {
      if (link.getAttribute('href') === path) {
        link.classList.add('active');
      }
    });
  })();
  </script>
  
</div>
</header>

      <main>
        




<ul class="breadcrumbs">
  <li><a href="http://localhost:1313/">

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path fill="currentColor" d="M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/></svg>


</a></li>
  
    
    
      <li><a href="http://localhost:1313/tech/">Teches</a></li>
    
    
  
    
  
</ul>



<h1 class="pg-title">Building VPN Server using OpenVPN</h1>


<div class="meta">
  



<p>


  
  
  <span class="meta-icon">

    <?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg fill="currentColor" width="800px" height="800px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19,4H17V3a1,1,0,0,0-2,0V4H9V3A1,1,0,0,0,7,3V4H5A3,3,0,0,0,2,7V19a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V7A3,3,0,0,0,19,4Zm1,15a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V12H20Zm0-9H4V7A1,1,0,0,1,5,6H7V7A1,1,0,0,0,9,7V6h6V7a1,1,0,0,0,2,0V6h2a1,1,0,0,1,1,1Z"/></svg>


</span>
  Posted on <time datetime="2024-09-20T10:37:37&#43;07:00">Sep 20, 2024</time>
  
  
  


  <span class="meta-icon">

    <?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg width="800px" height="800px" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM3.00683 12C3.00683 16.9668 7.03321 20.9932 12 20.9932C16.9668 20.9932 20.9932 16.9668 20.9932 12C20.9932 7.03321 16.9668 3.00683 12 3.00683C7.03321 3.00683 3.00683 7.03321 3.00683 12Z" fill="currentColor"/>
<path d="M12 5C11.4477 5 11 5.44771 11 6V12.4667C11 12.4667 11 12.7274 11.1267 12.9235C11.2115 13.0898 11.3437 13.2343 11.5174 13.3346L16.1372 16.0019C16.6155 16.278 17.2271 16.1141 17.5032 15.6358C17.7793 15.1575 17.6155 14.5459 17.1372 14.2698L13 11.8812V6C13 5.44772 12.5523 5 12 5Z" fill="currentColor"/>
</svg>


</span>
  
    3 mins
  


</p>

  


<p>
  <span class="meta-icon"> 

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M48 32H197.5C214.5 32 230.7 38.74 242.7 50.75L418.7 226.7C443.7 251.7 443.7 292.3 418.7 317.3L285.3 450.7C260.3 475.7 219.7 475.7 194.7 450.7L18.75 274.7C6.743 262.7 0 246.5 0 229.5V80C0 53.49 21.49 32 48 32L48 32zM112 176C129.7 176 144 161.7 144 144C144 126.3 129.7 112 112 112C94.33 112 80 126.3 80 144C80 161.7 94.33 176 112 176z"/></svg>


 </span>
  
  <a class="tag" href="/tags/vpn/">Vpn</a>
  
  <a class="tag" href="/tags/server/">Server</a>
  
  <a class="tag" href="/tags/openvpn/">Openvpn</a>
  
</p>



</div>







<p>Openvpn adalah sebuah VPN daemon <em>open source</em> yang dibuat oleh James Yoman.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> Kita mungkin sudah terbiasa menggunakan VPN untuk mengakses situs atau website yang di-<em>block</em> oleh pemerintah. Itu artinya kita sudah terbiasa menggunakan VPN sebagai client untuk terhubung ke sebuah VPN server sehingga nanti <em>ip address</em> kita akan berubah menjadi <em>ip address</em> server VPN tersebut. Nah, di artikel ini, saya mau berbagi cara membuat VPN server kita sendiri menggunakan Openvpn.</p>
<p>Tutorial ini akan sangat mudah karena saya akan menggunakan sebuah <em>script</em> instalasi yang dibuat oleh <a href="https://github.com/angristan" target="_blank"><strong>angristan</strong></a>
 di Github yang sebetulnya cara instalasinya sudah dijelaskan juga di sana:<br>
<mark> <a href="https://github.com/angristan/openvpn-install" target="_blank">https://github.com/angristan/openvpn-install</a>
 </mark></p>
<p>Karena saya tidak menggunakan server atau <em>virtual machine</em> (VM) eksternal seperti yang disediakan oleh Google Cloud Platform, Oracle, dan lainnya, jadi saya hanya akan mendemokannya dari VM saya sendiri. Artinya, nanti saya tidak akan menggunakan <em>ip public</em>, tapi <em>ip private</em> saja.</p>
<p>Jadi, skenario demo kali ini, yaitu sebagai berikut:</p>
<ul>
<li><strong>Debian</strong> sebagai Openvpn Server.</li>
<li><strong>Archlinux</strong> sebagai Openvpn Client.</li>
</ul>
<p>So, langkah-langkah di bawah ini tentu saja saya lakukan di dalam VM Debian.</p>
<p>Oke, pertama, kita bisa men-<em>download</em> <em>script</em>-nya terlebih dahulu:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>curl -O https://raw.githubusercontent.com/angristan/openvpn-install/master/openvpn-install.sh
</span></span><span style="display:flex;"><span>chmod +x openvpn-install.sh
</span></span></code></pre></div><p><img loading="lazy" src="/openvpn-server/ss1.png" alt="ss1"  title="downloading the script"  />
</p>
<p>Kemudian, jalankan <em>script</em>-nya:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo ./openvpn-install.sh
</span></span></code></pre></div><p>Kita akan diminta memasukkan <em>ip address</em>:</p>
<blockquote>
<p><strong>Note:</strong><br>
Seharusnya, kita mengisikan <em>ip public</em> dari server / <em>virtual machine</em> yang akan kita <em>install</em>-kan openvpn server ini, tapi seperti saya mention di awal, saya hanya akan menggunakan <em>ip private</em>.</p>
</blockquote>
<p><img loading="lazy" src="/openvpn-server/ss2.png" alt="ss2"  title="asking for ip address"  />
</p>
<p>Karena <em>script</em> mendeteksi <em>ip address</em> kita adalah <em>ip private</em>, jadi, sekali lagi dia akan meminta ip public kita. Tapi, saya akan tetap mengisikan <em>ip private</em>.</p>
<p><img loading="lazy" src="/openvpn-server/ss3.png" alt="ss3"  title="asking for ip address"  />
</p>
<p>Kemudian, ada beberapa pertanyaan yang dapat kita biarkan sebagaimana jawaban <em>default</em>-nya, yaitu:</p>
<ul>
<li>Do you want to enable IPv6 support (NAT)? [y/n]: n</li>
<li>What port do you want OpenVPN to listen to?
<ol>
<li>Default: 1194</li>
<li>Custom</li>
<li>Random [49152-65535]
Port choice [1-3]: 1</li>
</ol>
</li>
<li>What protocol do you want OpenVPN to use?
UDP is faster. Unless it is not available, you shouldn&rsquo;t use TCP.
<ol>
<li>UDP</li>
<li>TCP
Protocol [1-2]: 1</li>
</ol>
</li>
<li>What DNS resolvers do you want to use with the VPN?
<ol>
<li>Current system resolvers (from /etc/resolv.conf)</li>
<li>Self-hosted DNS Resolver (Unbound)</li>
<li>Cloudflare (Anycast: worldwide)</li>
<li>Quad9 (Anycast: worldwide)</li>
<li>Quad9 uncensored (Anycast: worldwide)</li>
<li>FDN (France)</li>
<li>DNS.WATCH (Germany)</li>
<li>OpenDNS (Anycast: worldwide)</li>
<li>Google (Anycast: worldwide)</li>
<li>Yandex Basic (Russia)</li>
<li>AdGuard DNS (Anycast: worldwide)</li>
<li>NextDNS (Anycast: worldwide)</li>
<li>Custom
DNS [1-12]: 11</li>
</ol>
</li>
<li>Do you want to use compression? It is not recommended since the VORACLE attack makes use of it.
Enable compression? [y/n]: n</li>
<li>Do you want to customize encryption settings?
Unless you know what you&rsquo;re doing, you should stick with the default parameters provided by the script.
Note that whatever you choose, all the choices presented in the script are safe. (Unlike OpenVPN&rsquo;s defaults)
See <a href="https://github.com/angristan/openvpn-install#security-and-encryption" target="_blank">https://github.com/angristan/openvpn-install#security-and-encryption</a>
 to learn more.</li>
</ul>
<p>Customize encryption settings? [y/n]: n</p>
<p>Berikutnya, kita bisa memulai proses instalasi dengan menekan Enter di keyboard dan biarkan proses update sistem dan instalasi berjalan hingga ada pertanyaan untuk meng-input-kan nama file <em>client</em>-nya:</p>
<p><img loading="lazy" src="/openvpn-server/ss4.png" alt="ss4"  title="asking for ip client&#39;s name"  />
</p>
<ul>
<li>Do you want to protect the configuration file with a password?
(e.g. encrypt the private key with a password)
<ol>
<li>Add a passwordless client</li>
<li>Use a password for the client
Select an option [1-2]: 1</li>
</ol>
</li>
</ul>
<p>Dan saya sudah memiliki sebuah file client openvpn:</p>
<p><img loading="lazy" src="/openvpn-server/ss5.png" alt="ss5"  title="openvpn client"  />
</p>
<p>Saya juga bisa memastikan openvpn sudah berjalan di server dengan perintah:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo systemctl status openvpn
</span></span></code></pre></div><p>atau</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo netstat -tupln | grep openvpn
</span></span></code></pre></div><p><img loading="lazy" src="/openvpn-server/ss6.png" alt="ss6"  title="checking openvpn server status"  />
</p>
<p>Berikutnya, saya akan men-<em>download</em> file konfigurasi client yang tadi sudah dibuat. File ini akan saya unduh ke Archlinux.</p>
<p><img loading="lazy" src="/openvpn-server/ss7.png" alt="ss7"  title="downloading openvpn client config gile"  />
</p>
<p>Untuk tersambung ke openvpn server menggunakan file konfigurasi client tersebut, saya mengetikkan perintah berikut:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo openvpn vpn-wil.ovpn
</span></span></code></pre></div><p>Sekarang, VM Archlinux saya sebagai client bisa terkoneksi ke VPN server yang berjalan di VM Debian, dapat terlihat dari <em>ip address</em> dengan <em>interface</em> tun0 berikut:</p>
<p><img loading="lazy" src="/openvpn-server/ss8.png" alt="ss8"  title="client to server - openvpn"  />
</p>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/SHSqFAdd41A?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://openvpn.net" target="_blank">https://openvpn.net</a>
&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>











<nav class="pagenav">
  
  <div></div>
  
  
    <a class="next" href="/tech/ircserver/">
      <span class="direction">Next »</span>
      <br>
      <span> Create Your Own IRC Server! </span>
    </a>
  
</nav>








      </main>
      <footer>
  <div class="copyright">
     © 2024  Abdullah Wildan Ulhaq 
  </div>
  
  <div class="attribution">
    Built with <a href="https://gohugo.io" target="_blank">Hugo</a> & <a href="https://github.com/mnjm/kayal" target="_blank">Kayal</a>
  </div>
  
</footer>

    </div>
  </body>
</html>
